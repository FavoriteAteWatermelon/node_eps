{"version":3,"sources":["webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/json/stringify.js","webpack:///./node_modules/_core-js@2.6.11@core-js/library/fn/json/stringify.js","webpack:///./src/api/trainList.js","webpack:///src/views/fae/trainingList.vue","webpack:///./src/views/fae/trainingList.vue?71d2","webpack:///./src/views/fae/trainingList.vue"],"names":["module","exports","default","__webpack_require__","__esModule","core","$JSON","JSON","stringify","it","apply","arguments","data","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","a","resolve","reject","http","post","SERVER_HOST","TRAIN_LIST_ADD_API","then","res","console","log","catch","err","TRAIN_LIST_DELETE_API","pageSize","currentPage","dateArray","get","TRAIN_LIST_INFO_API","trainingList","_ref","imgUrl","dialogVisible","trainList","title","requiro","guider","trainOwner","valueDate","valueDay","defineProperty_default","label","width","type","property","computed","extends_default","Object","vuex_esm","methods","deleteItem","item","_this","this","_id","username","userInfo","$message","message","_search","addUser","_this2","loading","isLogin","assign_default","creater","trainDuring","_addItem","_this3","pictLoading","stringify_default","forEach","createDate","date","tableData","total","_exportExcel","$refs","doorTable","exportExcel","handleSizeChange","size","handleCurrentChange","index","mounted","components","BasePagination","basePagination","DataTable","datatable","ImgCutter","src","fae_trainingList","render","_vm","_h","$createElement","_c","_self","staticStyle","display","justify-content","margin-bottom","_v","staticClass","margin-right","text-align","background","attrs","icon","on","click","directives","name","rawName","value","expression","element-loading-background","element-loading-text","element-loading-spinner","stripe","border","highlight-current-row","fixed","scopedSlots","_u","key","fn","scope","row","confirm","$event","slot","_e","close-on-click-modal","visible","update:visible","margin-top","placeholder","model","callback","$$v","$set","range-separator","format","value-format","start-placeholder","end-placeholder","autosize","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"yCAAAA,EAAAC,SAAkBC,QAAYC,EAAQ,QAAmCC,YAAA,2BCAzE,IAAAC,EAAWF,EAAQ,QACnBG,EAAAD,EAAAE,OAAAF,EAAAE,MAAuCC,UAAAD,KAAAC,YACvCR,EAAAC,QAAA,SAAAQ,GACA,OAAAH,EAAAE,UAAAE,MAAAJ,EAAAK,qDCEO,SAAuBC,GAC5B,OAAO,IAAIC,EAAAC,EAAQ,SAACC,EAASC,GAE3BC,IAAKC,KAAKC,IAAcC,IAAoBR,GAAMS,KAAK,SAAAC,GACrDC,QAAQC,IAAIF,GACZP,EAAQO,KACPG,MAAM,SAAAC,GAEPV,EAAOU,GACPH,QAAQC,IAAIE,YAKX,SAA0Bd,GAC/B,OAAO,IAAIC,EAAAC,EAAQ,SAACC,EAASC,GAE3BC,IAAKC,KAAKC,IAAcQ,IAAuBf,GAAMS,KAAK,SAAAC,GACxDC,QAAQC,IAAIF,GACZP,EAAQO,KACPG,MAAM,SAAAC,GAEPV,EAAOU,GACPH,QAAQC,IAAIE,YAOX,SAA4BE,EAAWC,EAAaC,GAEzD,OAAO,IAAIjB,EAAAC,EAAQ,SAACC,EAASC,GAE3BC,IAAKc,IAAIZ,IAAca,IAAsB,UAAYJ,EAAS,UAAYC,EAAa,GAAKD,EAAW,cAAgBE,GAAWT,KAAK,SAAAC,GAEzIP,EAAQO,KACPG,MAAM,SAAAC,GAEPV,EAAOU,GACPH,QAAQC,IAAIE,8UCgGlBO,GACArB,KADA,WACA,IAAAsB,EACA,OAAAA,GACAC,OAAA,GACAC,eAAA,EACAC,WACAC,MAAA,GACAC,QAAA,GACAC,OAAA,GACAC,WAAA,IAEAC,UAAA,GACAC,SAAA,IAVAC,IAAAV,EAAA,iBAYA,GAZAU,IAAAV,EAAA,eAcA,GAdAU,IAAAV,EAAA,gBAAAU,IAAAV,EAAA,cAgBA,GAhBAU,IAAAV,EAAA,WAiBA,IAjBAU,IAAAV,EAAA,UAkBA,IAlBAU,IAAAV,EAAA,YAmBA,IAnBAU,IAAAV,EAAA,QAoBA,GApBAU,IAAAV,EAAA,UAqBA,IArBAU,IAAAV,EAAA,iBAuBAW,MAAA,KAAAC,MAAA,QAAAC,KAAA,UACAC,SAAA,WAAAH,MAAA,OACAG,SAAA,SAAAH,MAAA,OACAG,SAAA,aAAAH,MAAA,SACAG,SAAA,OAAAH,MAAA,QA3BAX,GA+BAe,SAAYC,OACZC,OAAAC,EAAA,EAAAD,EACA,UACA,cAGAE,SACAC,WADA,SACAC,GAAA,IAAAC,EAAAC,KACAC,EAAAH,EAAAG,IACMP,OAAAd,EAAA,EAAAc,EAANO,MAAAC,SAAAF,KAAAG,SAAAD,WAAAtC,KAAA,SAAAC,GACA,UAAAA,EAAAV,KACA4C,EAAAK,UACAC,QAAA,QACAf,KAAA,YAEA,OAAAzB,EAAAV,MACA4C,EAAAK,UACAC,QAAA,QACAf,KAAA,YAEAS,EAAAO,WAEAP,EAAAK,UACAC,QAAA,cACAf,KAAA,aAKAiB,QAvBA,WAuBA,IAAAC,EAAAR,KAGA,GADAA,KAAAS,SAAA,GACAT,KAAAU,QAMA,OALAV,KAAAI,UACAC,QAAA,OACAf,KAAA,iBAEAU,KAAArB,eAAA,GAGAqB,KAAAG,SAAAD,SAUQR,OAAAd,EAAA,EAAAc,CAARiB,OAAAX,KAAApB,WAAAgC,QAAAZ,KAAAG,SAAAD,SAAAW,YAAAb,KAAAf,UAAA,SAAAe,KAAAf,UAAA,MAAArB,KAAA,SAAAC,GACA2C,EAAAC,SAAA,EACA5C,EAAAV,KAMA,UAAAU,EAAAV,KACAqD,EAAAJ,UACAC,QAAA,WACAf,KAAA,aAGAkB,EAAAJ,UACAC,QAAA,QACAf,KAAA,YAEAkB,EAAA7B,eAAA,EACA6B,EAAAF,YAhBAE,EAAAJ,UACAC,QAAA,kBACAf,KAAA,UAEAkB,EAAA7B,eAAA,MAhBAqB,KAAAS,SAAA,EACAT,KAAAI,UACAC,QAAA,YACAf,KAAA,cAgCAwB,SAtEA,WAuEAd,KAAArB,eAAA,GAEA2B,QAzEA,WAyEA,IAAAS,EAAAf,KACAA,KAAAgB,aAAA,EACMtB,OAAAd,EAAA,EAAAc,CAANM,KAAA7B,SAAA6B,KAAA5B,YAAA6C,IAAAjB,KAAAd,WAAAtB,KAAA,SAAAC,GACAA,EAAAV,UAAA+D,QAAA,SAAApB,GACAA,EAAAqB,WAAAzB,OAAA0B,EAAA,EAAA1B,CAAAI,EAAAqB,cAEAJ,EAAAM,UAAAxD,EAAAV,UACA4D,EAAAO,MAAAzD,EAAAV,KAAAmE,MACAP,EAAAC,aAAA,KAWAO,aA5FA,WAgGAvB,KAAAwB,MAAAC,UAAAC,aAHA,wEACA,iHACA,UAGAC,iBAlGA,SAkGAC,GACA5B,KAAA5B,YAAA,EACA4B,KAAA7B,SAAAyD,EACA5B,KAAAM,WAEAuB,oBAvGA,SAuGAC,GACA9B,KAAA5B,YAAA0D,EACA9B,KAAAM,YAGAyB,QAnJA,WAoJA/B,KAAAM,UACAxC,QAAAC,IAAAiC,KAAAU,UAEAsB,YAEAC,eAAAC,EAAA,EACAC,UAAAC,EAAA,EACAC,UAAAC,EAAA,ICrSeC,GADEC,OAFjB,WAA0B,IAAAC,EAAAzC,KAAa0C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,aAAaC,QAAA,OAAAC,kBAAA,gBAAAC,gBAAA,UAA2EL,EAAA,OAAAH,EAAAS,GAAA,KAAAN,EAAA,OAAAA,EAAA,aAAkDO,YAAA,cAAAL,aAAuCM,eAAA,OAAAC,aAAA,QAAAC,WAAA,WAAkEC,OAAQjE,KAAA,UAAAkE,KAAA,oBAA2CC,IAAKC,MAAAjB,EAAAlB,gBAA0BkB,EAAAS,GAAA,aAAAT,EAAAS,GAAA,KAAAN,EAAA,aAAkDO,YAAA,cAAAL,aAAuCM,eAAA,OAAAC,aAAA,QAAAC,WAAA,WAAkEC,OAAQjE,KAAA,UAAAkE,KAAA,gBAAuCC,IAAKC,MAAAjB,EAAA3B,YAAsB2B,EAAAS,GAAA,gBAAAT,EAAAS,GAAA,KAAAN,EAAA,aAAqDE,aAAaQ,WAAA,WAAuBC,OAAQjE,KAAA,UAAAkE,KAAA,kBAAyCC,IAAKC,MAAAjB,EAAAnC,WAAqBmC,EAAAS,GAAA,cAAAT,EAAAS,GAAA,KAAAT,EAAApB,UAAA,OAAAuB,EAAA,YAAyEe,aAAaC,KAAA,UAAAC,QAAA,YAAAC,MAAArB,EAAA,YAAAsB,WAAA,gBAAoFjB,aAAezD,MAAA,QAAekE,OAAQS,6BAAA,qBAAAC,uBAAA,UAAAC,0BAAA,kBAAAC,QAAA,EAAAC,QAAA,EAAAjH,KAAAsF,EAAApB,UAAAgD,wBAAA,MAA4MzB,EAAA,mBAAwBW,OAAOjE,KAAA,QAAAF,MAAA,KAAAC,MAAA,QAA0CoD,EAAAS,GAAA,KAAAN,EAAA,mBAAoCW,OAAOhE,SAAA,QAAAH,MAAA,QAAiCqD,EAAAS,GAAA,KAAAN,EAAA,mBAAoCW,OAAOhE,SAAA,aAAAH,MAAA,SAAuCqD,EAAAS,GAAA,KAAAN,EAAA,mBAAoCW,OAAOlE,MAAA,QAAAE,SAAA,cAAAH,MAAA,aAA4DqD,EAAAS,GAAA,KAAAN,EAAA,mBAAoCW,OAAOhE,SAAA,UAAAF,MAAA,QAAAD,MAAA,QAAmDqD,EAAAS,GAAA,KAAAN,EAAA,mBAAoCW,OAAOhE,SAAA,SAAAH,MAAA,QAAkCqD,EAAAS,GAAA,KAAAN,EAAA,mBAAoCW,OAAOhE,SAAA,SAAAH,MAAA,QAAkCqD,EAAAS,GAAA,KAAAN,EAAA,mBAAoCW,OAAOhE,SAAA,aAAAF,MAAA,QAAAD,MAAA,UAAwDqD,EAAAS,GAAA,KAAAN,EAAA,mBAAoCW,OAAOhE,SAAA,UAAAH,MAAA,SAAoCqD,EAAAS,GAAA,KAAAN,EAAA,mBAAoCW,OAAOe,MAAA,QAAAlF,MAAA,KAAAC,MAAA,OAA2CkF,YAAA9B,EAAA+B,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAA/B,EAAA,iBAA4Be,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAArB,EAAAtC,SAAAD,WAAAyE,EAAAC,IAAAhE,QAAAmD,WAAA,8CAA0IR,OAAS1E,MAAA,gBAAuB4E,IAAKoB,QAAA,SAAAC,GAA2B,OAAArC,EAAA5C,WAAA8E,EAAAC,SAAmChC,EAAA,aAAkBW,OAAOwB,KAAA,YAAAzF,KAAA,OAAAsC,KAAA,SAAgDmD,KAAA,cAAkBtC,EAAAS,GAAA,gBAAuB,sBAAwB,GAAAT,EAAAuC,KAAAvC,EAAAS,GAAA,KAAAT,EAAApB,UAAA,OAAAuB,EAAA,kBAAuEW,OAAOjC,MAAAmB,EAAAnB,OAAkBmC,IAAK5B,oBAAAY,EAAAZ,oBAAAF,iBAAAc,EAAAd,oBAAuFc,EAAAuC,KAAAvC,EAAAS,GAAA,KAAAN,EAAA,aAAuCW,OAAO1E,MAAA,eAAAoG,wBAAA,EAAAC,QAAAzC,EAAA9D,cAAAU,MAAA,SAAgGoE,IAAK0B,iBAAA,SAAAL,GAAkCrC,EAAA9D,cAAAmG,MAA2BlC,EAAA,OAAYE,aAAaC,QAAA,OAAAqC,aAAA,UAAsCxC,EAAA,QAAaO,YAAA,UAAoBV,EAAAS,GAAA,SAAAN,EAAA,YAAiCW,OAAO8B,YAAA,SAAsBC,OAAQxB,MAAArB,EAAA7D,UAAA,MAAA2G,SAAA,SAAAC,GAAqD/C,EAAAgD,KAAAhD,EAAA7D,UAAA,QAAA4G,IAAsCzB,WAAA,sBAA+B,GAAAtB,EAAAS,GAAA,KAAAN,EAAA,OAA4BE,aAAaC,QAAA,OAAAqC,aAAA,UAAsCxC,EAAA,QAAaO,YAAA,UAAoBV,EAAAS,GAAA,UAAAN,EAAA,YAAkCW,OAAO8B,YAAA,UAAuBC,OAAQxB,MAAArB,EAAA7D,UAAA,OAAA2G,SAAA,SAAAC,GAAsD/C,EAAAgD,KAAAhD,EAAA7D,UAAA,SAAA4G,IAAuCzB,WAAA,uBAAgC,GAAAtB,EAAAS,GAAA,KAAAN,EAAA,OAA4BE,aAAaC,QAAA,OAAAqC,aAAA,UAAsCxC,EAAA,QAAaO,YAAA,UAAoBV,EAAAS,GAAA,UAAAN,EAAA,YAAkCW,OAAO8B,YAAA,iBAA8BC,OAAQxB,MAAArB,EAAA7D,UAAA,WAAA2G,SAAA,SAAAC,GAA0D/C,EAAAgD,KAAAhD,EAAA7D,UAAA,aAAA4G,IAA2CzB,WAAA,2BAAoC,GAAAtB,EAAAS,GAAA,KAAAN,EAAA,OAA4BE,aAAaC,QAAA,OAAAqC,aAAA,UAAsCxC,EAAA,QAAaO,YAAA,UAAoBV,EAAAS,GAAA,YAAAT,EAAAS,GAAA,KAAAN,EAAA,kBAAsDW,OAAOjE,KAAA,YAAAoG,kBAAA,IAAAC,OAAA,mBAAAC,eAAA,aAAAC,oBAAA,OAAAC,kBAAA,QAAqJR,OAAQxB,MAAArB,EAAA,UAAA8C,SAAA,SAAAC,GAA+C/C,EAAAxD,UAAAuG,GAAkBzB,WAAA,gBAAyB,GAAAtB,EAAAS,GAAA,KAAAN,EAAA,OAA4BE,aAAaC,QAAA,OAAAqC,aAAA,UAAsCxC,EAAA,YAAiBW,OAAOjE,KAAA,WAAAyG,SAAA,GAAAV,YAAA,WAAwDC,OAAQxB,MAAArB,EAAA7D,UAAA,QAAA2G,SAAA,SAAAC,GAAuD/C,EAAAgD,KAAAhD,EAAA7D,UAAA,UAAA4G,IAAwCzB,WAAA,wBAAiC,GAAAtB,EAAAS,GAAA,KAAAN,EAAA,aAAkCE,aAAasC,aAAA,QAAoB7B,OAAQjE,KAAA,WAAiBmE,IAAKC,MAAAjB,EAAAlC,WAAqBkC,EAAAS,GAAA,iBAE5lJ8C,oBCCjB,IAcAC,EAdyBvJ,EAAQ,OAcjCwJ,CACE1H,EACA+D,GATF,EAVA,SAAA4D,GACEzJ,EAAQ,SAaV,kBAEA,MAUe0J,EAAA,QAAAH,EAAiB","file":"static/js/2.86f3e360885a6bcb70da.js","sourcesContent":["module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/json/stringify.js\n// module id = 3cXf\n// module chunks = 1 2","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_core-js@2.6.11@core-js/library/fn/json/stringify.js\n// module id = L+o2\n// module chunks = 1 2","/* eslint-disable */\r\nimport { TRAIN_LIST_ADD_API,TRAIN_LIST_INFO_API,TRAIN_LIST_DELETE_API} from './config'\r\nimport { SERVER_HOST } from '@/config/host'\r\nimport http from '@/utils/request'\r\n\r\nexport function addTrainList (data) {\r\n  return new Promise((resolve, reject) => {\r\n    // console.log(userInfo)\r\n    http.post(SERVER_HOST + TRAIN_LIST_ADD_API, data).then(res => {\r\n      console.log(res)\r\n      resolve(res)\r\n    }).catch(err => {\r\n      // for Debug\r\n      reject(err)\r\n      console.log(err)\r\n    })\r\n  })\r\n}\r\n\r\nexport function deleteTrainList (data) {\r\n  return new Promise((resolve, reject) => {\r\n    // console.log(userInfo)\r\n    http.post(SERVER_HOST + TRAIN_LIST_DELETE_API, data).then(res => {\r\n      console.log(res)\r\n      resolve(res)\r\n    }).catch(err => {\r\n      // for Debug\r\n      reject(err)\r\n      console.log(err)\r\n    })\r\n  })\r\n}\r\n\r\n\r\n// 查詢issue數據\r\nexport function findTrainListInfo (pageSize , currentPage, dateArray) {\r\n  // console.log(dateArray)\r\n  return new Promise((resolve, reject) => {\r\n    // console.log(userInfo)\r\n    http.get(SERVER_HOST + TRAIN_LIST_INFO_API + '?limit=' + pageSize+'&skip=' + (currentPage -1) * pageSize + '&dateArray=' + dateArray).then(res => {\r\n      // console.log(res)\r\n      resolve(res)\r\n    }).catch(err => {\r\n      // for Debug\r\n      reject(err)\r\n      console.log(err)\r\n    })\r\n  })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/trainList.js","<template>\r\n  <div>\r\n  <div style=\"display:flex;justify-content: space-between;margin-bottom:10px\">\r\n   <div></div>\r\n   <div>\r\n  <el-button class=\"exportExcel\"  @click=\"_exportExcel\" style=\"margin-right: 20px;text-align:right;background:#77A1D3\"  type=\"primary\" icon=\"el-icon-download\">導出Excel</el-button>\r\n  <el-button  class=\"exportExcel\" @click=\"_addItem\" style=\"margin-right: 20px;text-align:right;background:#20BDFF\"  type=\"primary\" icon=\"el-icon-plus\">新增Training</el-button>\r\n  <el-button type=\"primary\" style=\"background:#3CA55C\" icon=\"el-icon-search\" @click=\"_search\">搜索</el-button>\r\n   </div>\r\n</div>\r\n<el-table\r\n     v-if =\"tableData.length\"\r\n     v-loading = \"pictLoading\"\r\n      element-loading-background = \"rgba(0, 0, 0, 0.5)\"\r\n      element-loading-text = \"数据正在加载中\"\r\n      element-loading-spinner = \"el-icon-loading\"\r\n     :stripe= \"true\"\r\n     :border=\"true\"\r\n    :data=\"tableData\"\r\n    highlight-current-row\r\n    style=\"width: 100%\">\r\n    <el-table-column\r\n      type=\"index\"\r\n      label=\"序號\"\r\n      width=\"55\">\r\n    </el-table-column>\r\n    <el-table-column\r\n      property=\"title\"\r\n      label=\"主題\"\r\n     >\r\n    </el-table-column>\r\n    <el-table-column\r\n      property=\"trainOwner\"\r\n      label=\"受訓人\"\r\n     >\r\n    </el-table-column>\r\n    <el-table-column\r\n    width=\"200px\"\r\n      property=\"trainDuring\"\r\n      label=\"要求完成時間段\"\r\n     >\r\n    </el-table-column>\r\n\r\n    <el-table-column\r\n      property=\"requiro\"\r\n      width=\"200px\"\r\n      label=\"详情\"\r\n   >\r\n   </el-table-column>\r\n    <el-table-column\r\n      property=\"guider\"\r\n      label=\"導師\"\r\n   ></el-table-column>\r\n    <el-table-column\r\n      property=\"depart\"\r\n      label=\"部門\"\r\n   ></el-table-column>\r\n    <el-table-column\r\n      property=\"createDate\"\r\n      width=\"200px\"\r\n      label=\"創建時間\"\r\n   ></el-table-column>\r\n       <el-table-column\r\n      property=\"creater\"\r\n      label=\"創建人\"\r\n   ></el-table-column>\r\n      <el-table-column\r\n      fixed=\"right\"\r\n      label=\"操作\"\r\n      width=\"100\">\r\n      <template slot-scope=\"scope\">\r\n        <el-popconfirm\r\n         v-show=\" userInfo.username === scope.row.creater \"\r\n        @confirm=\"deleteItem(scope.row)\"\r\n  title=\"这是一段内容确定删除吗？\">\r\n  <el-button  type=\"text\" size=\"small\" slot=\"reference\">删除</el-button>\r\n</el-popconfirm>\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n\r\n  <BasePagination v-if=\"tableData.length\" @handleCurrentChange=\"handleCurrentChange\" @handleSizeChange=\"handleSizeChange\" :total=\"total\"/>\r\n  <el-dialog\r\n  title=\"新增Training項目\"\r\n  :close-on-click-modal=\"false\"\r\n  :visible.sync=\"dialogVisible\"\r\n  width=\"500px\"\r\n  >\r\n  <div style=\"display:flex;margin-top: 20px\">\r\n    <span class=\"title\">標題:</span><el-input\r\n  placeholder=\"請輸入標題\"\r\n  v-model=\"trainList.title\">\r\n</el-input>\r\n  </div>\r\n  <div style=\"display:flex;margin-top: 20px\">\r\n    <span class=\"title\">指導人:</span><el-input\r\n  placeholder=\"請輸入指導人\"\r\n  v-model=\"trainList.guider\">\r\n</el-input>\r\n  </div>\r\n  <div style=\"display:flex;margin-top: 20px\">\r\n    <span class=\"title\">受訓人:</span><el-input\r\n  placeholder=\"請輸入Training對象\"\r\n  v-model=\"trainList.trainOwner\">\r\n</el-input>\r\n  </div>\r\n  <div style=\"display:flex;margin-top: 20px\">\r\n    <span class=\"title\">要求段選擇:</span>\r\n    <el-date-picker\r\n      v-model=\"valueDate\"\r\n      type=\"daterange\"\r\n      range-separator=\"至\"\r\n      format=\"yyyy 年 MM 月 dd 日\"\r\n      value-format=\"yyyy-MM-dd\"\r\n      start-placeholder=\"开始日期\"\r\n      end-placeholder=\"结束日期\">\r\n    </el-date-picker>\r\n  </div>\r\n  <div style=\"display:flex;margin-top: 20px\">\r\n    <el-input\r\n  type=\"textarea\"\r\n  autosize\r\n  placeholder=\"請輸入要求明細\"\r\n  v-model=\"trainList.requiro\">\r\n</el-input>\r\n  </div>\r\n  <el-button  style=\"margin-top:20px\" @click=\"addUser\" type=\"primary\">新增</el-button>\r\n</el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable */\r\nimport BasePagination from '@/components/base/basePagination'\r\nimport DataTable from '@/components/datatable'\r\nimport ImgCutter from 'vue-img-cutter'\r\nimport  {addTrainList,findTrainListInfo,deleteTrainList} from '../../api/trainList'\r\nimport {utc2beijing} from '../../utils/date'\r\nimport {mapGetters} from 'vuex'\r\n// import {queryVacation} from '@/api/hr'\r\n// import {dateFormat} from '@/utils/date'\r\nexport default {\r\n  data () {\r\n    return {\r\n      imgUrl: '',\r\n      dialogVisible: false,\r\n      trainList: {\r\n        title: '',\r\n        requiro: '',\r\n        guider: '',\r\n        trainOwner: ''\r\n      },\r\n      valueDate: '',\r\n      valueDay: '',\r\n      // value: 'Te',\r\n      dialogVisible: false,\r\n      // 员工工号\r\n      pictLoading: false,\r\n      tableData: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      userNum: '',\r\n      startDate: '',\r\n      total: 0,\r\n      endDate: '',\r\n      tableBarList: [\r\n        {label: '序號', width: '200px', type: 'index'},\r\n        {property: 'username', label: '姓名'},\r\n        {property: 'depart', label: '部門'},\r\n        {property: 'createTime', label: '創建時間'},\r\n        {property: 'auth', label: '權限'}\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'isLogin',\r\n      'userInfo'\r\n    ])\r\n  },\r\n  methods: {\r\n    deleteItem (item) {\r\n      let {_id} = item\r\n      deleteTrainList({_id:_id,username: this.userInfo.username}).then(res => {\r\n        if(res.data === 'error') {\r\n          this.$message({\r\n            message: '删除失败!',\r\n            type: 'warning'\r\n          })         \r\n        }else if (res.data === 'ok') {\r\n          this.$message({\r\n            message: '删除成功!',\r\n            type: 'success'\r\n          })\r\n          this._search()       \r\n        }else{\r\n          this.$message({\r\n            message: '未知错误请联系管理员!',\r\n            type: 'error'\r\n          })        \r\n        }\r\n      }) \r\n    },\r\n    addUser () {\r\n      // console.log(this.userInfo)\r\n      this.loading = true\r\n      if (!this.isLogin) {\r\n        this.$message({\r\n          message: '請登錄!',\r\n          type: 'warning'\r\n        })\r\n        this.dialogVisible = false\r\n        return\r\n      }\r\n      if (!this.userInfo.username) {\r\n        this.loading = false\r\n        this.$message({\r\n          message: '請輸入新增用戶名!',\r\n          type: 'warning'\r\n        })\r\n      \r\n      }\r\n      else {     \r\n        // const that = this\r\n        addTrainList(Object.assign({},this.trainList,{creater: this.userInfo.username,trainDuring: this.valueDate[0] + ' ~ ' + this.valueDate[1] }) ).then(res => {\r\n          this.loading = false\r\n          if (!res.data) {\r\n            this.$message({\r\n              message: 'token过期请退出重新登录!',\r\n              type: 'error'\r\n            })\r\n            this.dialogVisible = false\r\n          } else if (res.data === 'exist') {\r\n             this.$message({\r\n              message: '此用戶名已存在!',\r\n              type: 'warning'\r\n            })\r\n          }else {\r\n            this.$message({\r\n              message: '新增成功!',\r\n              type: 'success'\r\n            })\r\n            this.dialogVisible = false\r\n            this._search()\r\n            // console.log(this.$store)\r\n          }\r\n        })\r\n      }\r\n    },\r\n\r\n    _addItem () {\r\n      this.dialogVisible = true\r\n    },\r\n    _search () {\r\n      this.pictLoading = true\r\n      findTrainListInfo(this.pageSize,this.currentPage,JSON.stringify(this.valueDay)).then(res =>{\r\n        res.data.data.forEach(item => {\r\n          item.createDate = utc2beijing(item.createDate)\r\n        });\r\n        this.tableData = res.data.data\r\n        this.total = res.data.total\r\n        this.pictLoading = false\r\n      })\r\n      // userInfo().then(res =>{\r\n      //   res.data.forEach(item => {\r\n      //     item.createTime = utc2beijing(item.createTime)\r\n      //   });\r\n      //   this.tableData = res.data\r\n      //   this.pictLoading = false\r\n      // })\r\n\r\n    },\r\n    _exportExcel () {\r\n      const tHeader = ['工號', '姓名', '部門代碼', '部門名稱', '申請時間', '休假時數', '休假開始時間', '休假結束時間', '休假類別', '請假原因']\r\n      const filterVal = ['userNo', 'userName', 'deptNo', 'deptName', 'applyDate', 'absenceHours', 'startTime', 'endTime', 'absenceName', 'reason']\r\n      const tabelName = '休假記錄表'\r\n      this.$refs.doorTable.exportExcel(tHeader, filterVal, tabelName)\r\n    },\r\n    handleSizeChange (size) {\r\n      this.currentPage = 1\r\n      this.pageSize = size\r\n      this._search()\r\n    },\r\n    handleCurrentChange (index) {\r\n      this.currentPage = index\r\n      this._search()\r\n    }\r\n  },\r\n  mounted () {\r\n    this._search()\r\n    console.log(this.isLogin)\r\n  },\r\n  components: {\r\n    // DateAndTitle,\r\n    BasePagination,\r\n    DataTable,\r\n    ImgCutter\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.title {\r\n  display: inline-block;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  color: #fff;\r\n  width: 80px!important;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  padding: 0 5px;\r\n  background: #409eff;\r\n  // margin-left: 10px;\r\n  border-top-left-radius: 4px;\r\n  border-bottom-left-radius: 4px;\r\n}\r\n.idCon{\r\n    display: inline-block;\r\n    font-size: 0;\r\n}\r\n// 截图\r\n.cropper-content {\r\n    .cropper {\r\n        width: auto;\r\n        height: 300px;\r\n    }\r\n}\r\n>>>.el-input__inner{\r\n  border-top-left-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/fae/trainingList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\",\"margin-bottom\":\"10px\"}},[_c('div'),_vm._v(\" \"),_c('div',[_c('el-button',{staticClass:\"exportExcel\",staticStyle:{\"margin-right\":\"20px\",\"text-align\":\"right\",\"background\":\"#77A1D3\"},attrs:{\"type\":\"primary\",\"icon\":\"el-icon-download\"},on:{\"click\":_vm._exportExcel}},[_vm._v(\"導出Excel\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"exportExcel\",staticStyle:{\"margin-right\":\"20px\",\"text-align\":\"right\",\"background\":\"#20BDFF\"},attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm._addItem}},[_vm._v(\"新增Training\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"background\":\"#3CA55C\"},attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm._search}},[_vm._v(\"搜索\")])],1)]),_vm._v(\" \"),(_vm.tableData.length)?_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.pictLoading),expression:\"pictLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"element-loading-background\":\"rgba(0, 0, 0, 0.5)\",\"element-loading-text\":\"数据正在加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"stripe\":true,\"border\":true,\"data\":_vm.tableData,\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序號\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"title\",\"label\":\"主題\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"trainOwner\",\"label\":\"受訓人\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"200px\",\"property\":\"trainDuring\",\"label\":\"要求完成時間段\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"requiro\",\"width\":\"200px\",\"label\":\"详情\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"guider\",\"label\":\"導師\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"depart\",\"label\":\"部門\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"createDate\",\"width\":\"200px\",\"label\":\"創建時間\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"creater\",\"label\":\"創建人\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-popconfirm',{directives:[{name:\"show\",rawName:\"v-show\",value:( _vm.userInfo.username === scope.row.creater ),expression:\" userInfo.username === scope.row.creater \"}],attrs:{\"title\":\"这是一段内容确定删除吗？\"},on:{\"confirm\":function($event){return _vm.deleteItem(scope.row)}}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"text\",\"size\":\"small\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}],null,false,919586632)})],1):_vm._e(),_vm._v(\" \"),(_vm.tableData.length)?_c('BasePagination',{attrs:{\"total\":_vm.total},on:{\"handleCurrentChange\":_vm.handleCurrentChange,\"handleSizeChange\":_vm.handleSizeChange}}):_vm._e(),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"新增Training項目\",\"close-on-click-modal\":false,\"visible\":_vm.dialogVisible,\"width\":\"500px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticStyle:{\"display\":\"flex\",\"margin-top\":\"20px\"}},[_c('span',{staticClass:\"title\"},[_vm._v(\"標題:\")]),_c('el-input',{attrs:{\"placeholder\":\"請輸入標題\"},model:{value:(_vm.trainList.title),callback:function ($$v) {_vm.$set(_vm.trainList, \"title\", $$v)},expression:\"trainList.title\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"margin-top\":\"20px\"}},[_c('span',{staticClass:\"title\"},[_vm._v(\"指導人:\")]),_c('el-input',{attrs:{\"placeholder\":\"請輸入指導人\"},model:{value:(_vm.trainList.guider),callback:function ($$v) {_vm.$set(_vm.trainList, \"guider\", $$v)},expression:\"trainList.guider\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"margin-top\":\"20px\"}},[_c('span',{staticClass:\"title\"},[_vm._v(\"受訓人:\")]),_c('el-input',{attrs:{\"placeholder\":\"請輸入Training對象\"},model:{value:(_vm.trainList.trainOwner),callback:function ($$v) {_vm.$set(_vm.trainList, \"trainOwner\", $$v)},expression:\"trainList.trainOwner\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"margin-top\":\"20px\"}},[_c('span',{staticClass:\"title\"},[_vm._v(\"要求段選擇:\")]),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"range-separator\":\"至\",\"format\":\"yyyy 年 MM 月 dd 日\",\"value-format\":\"yyyy-MM-dd\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.valueDate),callback:function ($$v) {_vm.valueDate=$$v},expression:\"valueDate\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"margin-top\":\"20px\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":\"\",\"placeholder\":\"請輸入要求明細\"},model:{value:(_vm.trainList.requiro),callback:function ($$v) {_vm.$set(_vm.trainList, \"requiro\", $$v)},expression:\"trainList.requiro\"}})],1),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"新增\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-002d0423\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/fae/trainingList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-002d0423\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./trainingList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./trainingList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./trainingList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-002d0423\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./trainingList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-002d0423\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/fae/trainingList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}