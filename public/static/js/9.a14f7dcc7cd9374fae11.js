webpackJsonp([9],{Fb9n:function(e,t){},md3T:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("4YfN"),s=a.n(i),n=a("a3Yh"),l=a.n(n),r=a("PSPz"),o=a("HjG9"),c=a("9Vkk"),u=a("vMJZ"),d=a("xT6B"),p=a("fUgm"),g={data:function(){var e;return e={imgUrl:"",dialogVisible:!1,user:{username:"",depart:"FAE"},valueDate:"",options:[{label:"FAE",value:"FAE"},{label:"BIOS",value:"BIOS"},{label:"FA",value:"FA"},{label:"SIT",value:"SIT"},{label:"PM",value:"PM"},{label:"HW",value:"HW"}]},l()(e,"dialogVisible",!1),l()(e,"pictLoading",!1),l()(e,"tableData",[]),l()(e,"currentPage",1),l()(e,"pageSize",10),l()(e,"userNum",""),l()(e,"startDate",""),l()(e,"total",0),l()(e,"endDate",""),l()(e,"tableBarList",[{label:"序號",width:"200px",type:"index"},{property:"username",label:"姓名"},{property:"depart",label:"部門"},{property:"createTime",label:"創建時間"},{property:"auth",label:"權限"}]),e},computed:s()({},Object(p.b)(["isLogin","userInfo"])),methods:{deleteItem:function(e){var t=this,a=e._id;Object(u.b)({_id:a,username:this.userInfo.username}).then(function(e){"error"===e.data?t.$message({message:"删除失败!",type:"warning"}):"ok"===e.data?(t.$message({message:"删除成功!",type:"success"}),t._search()):t.$message({message:"未知错误请联系管理员!",type:"error"})})},addUser:function(){var e=this;if(this.loading=!0,!this.isLogin)return this.$message({message:"請登錄!",type:"warning"}),void(this.dialogVisible=!1);this.user.username?"root"!=this.userInfo.username?this.$message({message:"无权限!",type:"warning"}):Object(u.a)(this.user).then(function(t){e.loading=!1,t.data?"exist"===t.data?e.$message({message:"此用戶名已存在!",type:"warning"}):(e.$message({message:"新增成功!",type:"success"}),e.dialogVisible=!1,e._search()):(e.$message({message:"token过期请退出重新登录!",type:"error"}),e.dialogVisible=!1)}):(this.loading=!1,this.$message({message:"請輸入新增用戶名!",type:"warning"}))},_addItem:function(){this.dialogVisible=!0},_search:function(){var e=this;this.pictLoading=!0,Object(u.c)().then(function(t){t.data.forEach(function(e){e.createTime=Object(d.a)(e.createTime)}),e.tableData=t.data,e.pictLoading=!1})},_exportExcel:function(){this.$refs.doorTable.exportExcel(["工號","姓名","部門代碼","部門名稱","申請時間","休假時數","休假開始時間","休假結束時間","休假類別","請假原因"],["userNo","userName","deptNo","deptName","applyDate","absenceHours","startTime","endTime","absenceName","reason"],"休假記錄表")},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this._search()},handleCurrentChange:function(e){this.currentPage=e,this._search()}},mounted:function(){this._search()},components:{BasePagination:r.a,DataTable:o.a,ImgCutter:c.a}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"10px"}},[a("div"),e._v(" "),a("div",[a("el-button",{staticClass:"exportExcel",staticStyle:{"margin-right":"20px","text-align":"right",background:"#77A1D3"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:e._exportExcel}},[e._v("導出Excel")]),e._v(" "),"root"===e.userInfo.username?a("el-button",{staticClass:"exportExcel",staticStyle:{"margin-right":"20px","text-align":"right",background:"#20BDFF"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e._addItem}},[e._v("新增人員")]):e._e(),e._v(" "),a("el-button",{staticStyle:{background:"#3CA55C"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e._search}},[e._v("搜索")])],1)]),e._v(" "),e.tableData.length?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.pictLoading,expression:"pictLoading"}],staticStyle:{width:"100%"},attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中","element-loading-spinner":"el-icon-loading",stripe:!0,border:!0,data:e.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序號",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{property:"username",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{property:"depart",label:"部門"}}),e._v(" "),a("el-table-column",{attrs:{property:"createTime",label:"創建時間"}}),e._v(" "),a("el-table-column",{attrs:{property:"auth",label:"權限"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popconfirm",{directives:[{name:"show",rawName:"v-show",value:"root"===e.userInfo.username,expression:" userInfo.username === 'root'"}],attrs:{title:"这是一段内容确定删除吗？"},on:{confirm:function(a){return e.deleteItem(t.row)}}},[a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("删除")])],1)]}}],null,!1,286944584)})],1):e._e(),e._v(" "),e.tableData.length?a("BasePagination",{attrs:{total:e.total},on:{handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}}):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"新增用戶","close-on-click-modal":!1,visible:e.dialogVisible,width:"400px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("span",{staticClass:"title"},[e._v("崗位 :")]),a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:!0},model:{value:e.user.depart,callback:function(t){e.$set(e.user,"depart",t)},expression:"user.depart"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticStyle:{display:"flex","margin-top":"20px"}},[a("span",{staticClass:"title"},[e._v("用戶名:")]),a("el-input",{attrs:{placeholder:"用戶名"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.addUser}},[e._v("新增")])],1)],1)},staticRenderFns:[]};var b=a("C7Lr")(g,m,!1,function(e){a("Fb9n")},"data-v-755e4798",null);t.default=b.exports}});
//# sourceMappingURL=9.a14f7dcc7cd9374fae11.js.map