webpackJsonp([0],{CyI0:function(t,o){},GGZQ:function(t,o){},HjG9:function(t,o,e){"use strict";var i={props:{tableType:{type:String,defatult:""},pictLoading:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]}},tableBarList:{type:Array,default:function(){return[]}}},methods:{exportExcel:function(t,o,i){var s=this;this.tableData.length?e.e(17).then(e.bind(null,"zWO4")).then(function(e){var a=s.tableData,r=s._formatJson(o,a);e.export_json_to_excel({header:t,data:r,filename:i})}):this.$message({message:"Please select at least one item",type:"warning"})},_formatJson:function(t,o){return o.map(function(o){return t.map(function(t){return o[t]})})}}},s={render:function(){var t=this.$createElement,o=this._self._c||t;return o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:this.pictLoading,expression:"pictLoading"}],staticStyle:{width:"100%"},attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中","element-loading-spinner":"el-icon-loading",stripe:!0,border:!0,data:this.tableData,"highlight-current-row":""}},this._l(this.tableBarList,function(t,e){return o("el-table-column",{key:e,attrs:{type:t.type,property:t.property,label:t.label,width:t.width}})}),1)},staticRenderFns:[]};var a=e("VU/8")(i,s,!1,function(t){e("CyI0")},"data-v-cb3c2daa",null);o.a=a.exports},JXpH:function(t,o){t.exports={_from:"vue-img-cutter",_id:"vue-img-cutter@2.1.10",_inBundle:!1,_integrity:"sha1-LJJIjNT1eYLy0UKWf1GUnVhjTp8=",_location:"/vue-img-cutter",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"vue-img-cutter",name:"vue-img-cutter",escapedName:"vue-img-cutter",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.npm.taobao.org/vue-img-cutter/download/vue-img-cutter-2.1.10.tgz",_shasum:"2c92488cd4f57982f2d142967f51949d58634e9f",_spec:"vue-img-cutter",_where:"F:\\Vue\\project\\web\\msi_eps_admin",author:{name:"acccccccb",email:"tabzhang@foxmail.com"},browserslist:["> 1%","last 2 versions","not ie <= 8"],bugs:{url:"https://github.com/acccccccb/vue-img-cutter/issues"},bundleDependencies:!1,dependencies:{vue:"^2.5.2"},deprecated:!1,description:"A image crop plug-in for Vue,you can use it to rotate、zoom images and cut any size",devDependencies:{autoprefixer:"^7.1.2","babel-core":"^6.22.1","babel-helper-vue-jsx-merge-props":"^2.0.3","babel-loader":"^7.1.1","babel-plugin-syntax-jsx":"^6.18.0","babel-plugin-transform-runtime":"^6.22.0","babel-plugin-transform-vue-jsx":"^3.5.0","babel-preset-env":"^1.3.2","babel-preset-stage-2":"^6.22.0",chalk:"^2.0.1","copy-webpack-plugin":"^4.0.1","css-loader":"^0.28.0","extract-text-webpack-plugin":"^3.0.0","file-loader":"^1.1.4","friendly-errors-webpack-plugin":"^1.6.1","html-webpack-plugin":"^2.30.1","js-yaml":"^3.13.1",lodash:"^4.17.15",mem:"^6.0.0","mixin-deep":"^2.0.1","node-notifier":"^5.1.2","optimize-css-assets-webpack-plugin":"^3.2.0",ora:"^1.2.0",portfinder:"^1.0.13","postcss-import":"^11.0.0","postcss-loader":"^2.0.8","postcss-url":"^7.2.1",rimraf:"^2.6.0",semver:"^5.3.0","set-value":"^3.0.1",shelljs:"^0.7.6","uglifyjs-webpack-plugin":"^1.1.1","url-loader":"^0.5.8","vue-loader":"^13.3.0","vue-style-loader":"^3.0.1","vue-template-compiler":"^2.5.2",webpack:"^3.6.0","webpack-bundle-analyzer":"^2.13.1","webpack-dev-server":"^2.11.5","webpack-merge":"^4.1.0"},engines:{node:">= 6.0.0",npm:">= 3.0.0"},homepage:"https://ihtmlcss.com/demo/dist/#/croptool",keywords:["image","crop","cutter","vue","裁剪"],license:"Apache2.0",main:"./src/index.js",name:"vue-img-cutter",private:!1,repository:{type:"git",url:"git+https://github.com/acccccccb/vue-img-cutter.git"},scripts:{build:"node build/build.js",dev:"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js",start:"npm run dev"},version:"2.1.10"}},PSPz:function(t,o,e){"use strict";var i={props:{total:{type:Number,default:0}},methods:{_handleCurrentChange:function(t){this.$emit("handleCurrentChange",t)},_handleSizeChange:function(t){this.$emit("handleSizeChange",t)}}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("el-pagination",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{"page-sizes":[10,20,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"size-change":this._handleSizeChange,"current-change":this._handleCurrentChange}})},staticRenderFns:[]};var a=e("VU/8")(i,s,!1,function(t){e("GGZQ")},"data-v-507fe0ea",null);o.a=a.exports},iuf3:function(t,o,e){"use strict";var i=e("Dd8w"),s=e.n(i),a=e("pFYg"),r=e.n(a),n=e("JXpH"),l=e.n(n),h={name:"ImgCutter",props:{crossOrigin:{type:Boolean,default:!1,required:!1},crossOriginHeader:{type:String,default:"*",required:!1},label:{type:String,default:"选择图片",required:!1},isModal:{type:Boolean,default:!0,required:!1},lockScroll:{type:Boolean,default:!0,required:!1},showChooseBtn:{type:Boolean,default:!0,required:!1},boxWidth:{type:Number,default:800,required:!1},boxHeight:{type:Number,default:400,required:!1},cutWidth:{type:Number,default:200,required:!1},cutHeight:{type:Number,default:200,required:!1},rate:{type:String,default:null,required:!1},tool:{type:Boolean,default:!0,required:!1},toolBgc:{type:String,default:"#fff",required:!1},sizeChange:{type:Boolean,default:!0,required:!1},originalGraph:{type:Boolean,default:!1,required:!1},moveAble:{type:Boolean,default:!0,required:!1},CuttingOriginal:{type:Boolean,default:!1,required:!1},WatermarkText:{type:String,default:"",required:!1},WatermarkTextFont:{type:String,default:"12px Sans-serif",required:!1},WatermarkTextColor:{type:String,default:"#fff",required:!1},WatermarkTextX:{type:Number,default:.95,required:!1},WatermarkTextY:{type:Number,default:.95,required:!1},smallToUpload:{type:Boolean,default:!1,required:!1},saveCutPosition:{type:Boolean,default:!1,required:!1},scaleAble:{type:Boolean,default:!0,required:!1},DoNotDisplayCopyright:{type:Boolean,default:!1,required:!1}},model:["label","boxWidth","boxHeight","rate","tool","DoNotDisplayCopyright"],data:function(){return{version:"",visible:!1,fileName:"",cutImageObj:null,onPrintImgTimmer:null,toolBoxPosition:{x:0,y:0},drawImg:{img:null,sx:0,sy:0,swidth:0,sheight:0,x:0,y:0,width:0,height:0},toolBox:{disable:!0,width:this.boxWidth/2,height:this.boxHeight/2,x:0,y:0,boxMove:{start:{x:0,y:0},moveTo:{x:0,y:0}}},dropImg:{active:!1,pageX:0,pageY:0,params:{}},rotateImg:{angle:0},rotateControl:{active:!1,start:{x:0,y:0},position:100},scaleImg:{rate:0,params:{}},controlBox:{disable:!0,btnName:"",start:{x:0,y:0,width:0,height:0}},selectBox:!1,selectBoxColor:"rgba(0,0,0,0.6)",isFlipHorizontal:!1,isFlipVertically:!1}},mounted:function(){var t=this;this.version=l.a.version,!1===this.isModal&&(this.visible=!0,this.$nextTick(function(){t.$refs.toolBox.onmousewheel=t.scaleImgWheel,t.$refs.toolBox.addEventListener("DOMMouseScroll",t.scaleImgWheel)}))},methods:{handleOpen:function(t){var o=this,e=this,i=function(t){if(e.$refs.toolBox.onmousewheel=o.scaleImgWheel,e.$refs.toolBox.addEventListener("DOMMouseScroll",o.scaleImgWheel),!0===e.isModal){!0===e.lockScroll&&(document.body.style.overflowY="hidden");var i=e.$refs.dialogMainModalRef.offsetHeight+200,s=window.innerHeight,a=e.$refs.mask;a.style.overflowY=i>s?"scroll":"hidden"}t&&"function"==typeof t&&t()};if(t&&"object"==(void 0===t?"undefined":r()(t))&&t.src){if(!t.name)throw new Error("传入参数必须包含：src,name");var s=new Image;!0===this.crossOrigin&&(s.crossOrigin=this.crossOriginHeader),s.name=t.name,s.style.position="fixed",s.style.top=-5e3,s.style.opacity=0,s.onerror=function(t){console.error("图片加载失败"),e.$emit("error",{event:t,msg:"图片加载失败"}),e.clearCutImageObj()},s.onload=function(){if(!0!==s.complete)throw new Error("图片加载失败");e.visible=!0,e.$nextTick(function(){i(function(){e.importImgToCanv(s)})})},s.src=t.src,this.cutImageObj=s,document.body.appendChild(s),this.$emit("onChooseImg",t)}else e.visible=!0,e.$nextTick(function(){i()})},handleClose:function(){var t=this;this.clearAll(),!0===this.isModal&&(!0===this.lockScroll&&(document.body.style.overflowY="scroll"),this.$nextTick(function(){t.visible=!1}))},chooseImg:function(){this.$refs.inputFile.click()},importImgToCanv:function(t){this.fileName=t.name;var o=t.height,e=t.width,i=this.boxWidth,a=this.boxHeight,r=void 0,n=s()({},this.drawImg);n.img=t,this.scaleImg.rate=e/o,o<a&&e<i?(r=1,n.x=(i-e)/2,n.y=(a-o)/2):e/o<=i/a?(r=a/o,n.x=(i-e*r)/2):(r=i/e,n.y=(a-o*r)/2),n.swidth=e,n.sheight=o,n.width=e*r,n.height=o*r,n.x=(i-n.width)/2,n.y=(a-n.height)/2,this.$set(this,"drawImg",n),this.printImg(),this.putToolBox()},putImgToCanv:function(t){var o=this,e=void 0;if(!t.target.files)return console.error("IE9及以下需要自己传入image对象"),!1;if(e=t.target.files[0]||null){this.fileName=e.name;var i=new FileReader;new Image,i.readAsDataURL(e),i.onload=function(t){var a=t.target.result,r=document.createElement("img");r.src=a;var n=setInterval(function(){if(2==i.readyState){if(clearInterval(n),!o.sizeChange&&o.smallToUpload&&r.width<=o.cutWidth&&r.height<=o.cutHeight)return o.handleClose(),void o.$emit("cutDown",{filename:e.name,file:e});var t=r.height,a=r.width,l=o.boxWidth,h=o.boxHeight,d=void 0,c=s()({},o.drawImg);c.img=r,o.scaleImg.rate=a/t,t<h&&a<l?(d=1,c.x=(l-a)/2,c.y=(h-t)/2):a/t<=l/h?(d=h/t,c.x=(l-a*d)/2):(d=l/a,c.y=(h-t*d)/2),c.swidth=a,c.sheight=t,c.width=a*d,c.height=t*d,c.x=(l-c.width)/2,c.y=(h-c.height)/2,o.$set(o,"drawImg",c),o.printImg(),o.putToolBox()}},200)},this.$emit("onChooseImg",e)}},putToolBox:function(){this.toolBox.width!==this.boxWidth/2&&this.toolBox.height!==this.boxHeight/2&&!1!==this.saveCutPosition||(this.toolBox.width=this.cutWidth>this.boxWidth?this.boxWidth:this.cutWidth,this.toolBox.height=this.cutHeight>this.boxHeight?this.boxHeight:this.cutHeight),(0===this.toolBox.x&&0===this.toolBox.y||!1===this.saveCutPosition)&&(this.toolBox.x=this.boxWidth/2-this.toolBox.width/2,this.toolBox.y=this.boxHeight/2-this.toolBox.height/2),this.drawControlBox(this.toolBox.width,this.toolBox.height,this.toolBox.x,this.toolBox.y)},isSupportFileApi:function(){return!!(window.File&&window.FileList&&window.FileReader&&window.Blob&&-1===navigator.userAgent.indexOf("Edge")&&-1===navigator.userAgent.indexOf("MSIE")&&-1===navigator.userAgent.indexOf("Trident"))},dataURLtoFile:function(t,o){for(var e=t.split(","),i=e[0].match(/:(.*?);/)[1],s=atob(e[1]),a=s.length,r=new Uint8Array(a);a--;)r[a]=s.charCodeAt(a);return this.isSupportFileApi()?new File([r],o,{type:i}):"不支持File对象"},clearAll:function(){var t=this.$refs.canvas;t.getContext("2d").clearRect(0,0,t.width,t.height);var o=this.$refs.canvasSelectBox;o.getContext("2d").clearRect(0,0,o.width,o.height);var e=this.drawImg.sx,i=this.drawImg.sy;this.drawImg={img:null,sx:e,sy:i,swidth:0,sheight:0,x:0,y:0,width:0,height:0},this.isFlipHorizontal=!1,this.isFlipVertically=!1,this.$refs.inputFile.value="",this.rotateImg.angle=0,this.drawImg.img=null,this.turnReset(),this.clearCutImageObj(),this.$emit("onClearAll")},clearCutImageObj:function(){null!==this.cutImageObj&&void 0!==this.cutImageObj&&("function"==typeof this.cutImageObj.remove?this.cutImageObj.remove():this.cutImageObj.removeNode()),this.cutImageObj=null},drawControlBox:function(t,o,e,i){var s=this;t>this.boxWidth&&(t=this.boxWidth),o>this.boxHeight&&(o=this.boxHeight),e<0&&(e=0),i<0&&(i=0);var a=this.$refs.toolBoxControl,r=this.$refs.canvasSelectBox,n=r.getContext("2d");n.fillStyle=this.selectBoxColor,n.clearRect(0,0,r.width,r.height),n.fillRect(0,0,r.width,r.height);var l=void 0,h=void 0;if(this.rate&&""!==this.rate){var d=this.rate.split(":")[0]/this.rate.split(":")[1];d>=1?(l=t,h=t/d):(l=o*d,h=o)}else l=t,h=o;this.toolBox.width=l,this.toolBox.height=h,a.style.width=Math.abs(l)+"px",a.style.height=Math.abs(h)+"px",this.toolBox.boxMove.moveTo.x=e,this.toolBox.boxMove.moveTo.y=i,l<0&&(e+=l),h<0&&(i+=h),e+this.toolBox.width>this.boxWidth&&(e=this.boxWidth-this.toolBox.width),e<0&&(e=0),i+this.toolBox.height>this.boxHeight&&(i=this.boxHeight-this.toolBox.height),i<0&&(i=0),this.toolBoxPosition.x=e,this.toolBoxPosition.y=i,a.style.left=e+"px",a.style.top=i+"px",n.clearRect(e,i,Math.abs(l),Math.abs(h)),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout(function(){s.cropPicture(!0)},100)},resetToolBox:function(){this.toolBox.width<0&&(this.toolBox.boxMove.moveTo.x=this.toolBox.x-this.toolBox.width),this.toolBox.height<0&&(this.toolBox.boxMove.moveTo.y=this.toolBox.y-this.toolBox.height),this.toolBox.width=Math.abs(this.toolBox.width),this.toolBox.height=Math.abs(this.toolBox.height)},toolBoxMouseDown:function(t){var o=this.$refs.toolBoxControl;this.toolBox.x=parseInt(o.style.left.split("px")[0]),this.toolBox.y=parseInt(o.style.top.split("px")[0]),this.toolBox.disable=!1,this.dropImg.active=!1,this.toolBox.boxMove.start={x:t.pageX,y:t.pageY}},toolBoxMouseMove:function(t){if(this.dropImg.active&&this.dropImgMove(t),!1===this.toolBox.disable&&!0===this.moveAble){var o=t.pageX-this.toolBox.boxMove.start.x,e=t.pageY-this.toolBox.boxMove.start.y,i=this.toolBox.x+o,s=this.toolBox.y+e;this.drawControlBox(this.toolBox.width,this.toolBox.height,i,s)}},toolBoxMouseLeave:function(){var t=this;this.toolBox.disable=!0,this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout(function(){t.cropPicture(!0)},100),this.resetToolBox()},toolBoxMouseUp:function(t){this.toolBox.x=parseInt(this.toolBoxPosition.x),this.toolBox.y=parseInt(this.toolBoxPosition.y),this.toolBox.disable=!0,this.dropImg.active=!1,this.resetToolBox()},printImg:function(){var t=this;if(this.drawImg.img){var o=this.$refs.canvas,e=o.getContext("2d");e.font="18px bold 黑体",e.fillStyle="#ff0",e.textAlign="center",e.textBaseline="middle",e.save(),e.clearRect(0,0,o.width,o.height),e.translate(this.drawImg.x+this.drawImg.width/2,this.drawImg.y+this.drawImg.height/2),e.rotate(this.rotateImg.angle*Math.PI/180),e.translate(-(this.drawImg.x+this.drawImg.width/2),-(this.drawImg.y+this.drawImg.height/2)),e.translate(this.drawImg.x,this.drawImg.y),e.scale(this.isFlipHorizontal?-1:1,this.isFlipVertically?-1:1),e.drawImage(this.drawImg.img,this.drawImg.sx,this.drawImg.sy,this.drawImg.swidth,this.drawImg.sheight,this.isFlipHorizontal?-this.drawImg.width:0,this.isFlipVertically?-this.drawImg.height:0,this.drawImg.width,this.drawImg.height),e.translate(-this.drawImg.x,this.drawImg.y),e.restore(),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout(function(){t.cropPicture(!0)},100)}},dropImgOn:function(t){this.dropImg.active=!0,this.dropImg.params=s()({},this.drawImg),this.dropImg.pageX=t.pageX,this.dropImg.pageY=t.pageY},dropImgOff:function(){var t=this;this.dropImg.active=!1,this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout(function(){t.cropPicture(!0)},100)},dropImgMove:function(t){if(this.dropImg.active&&this.drawImg.img){var o=s()({},this.drawImg);o.x=this.dropImg.params.x-(this.dropImg.pageX-t.pageX),o.y=this.dropImg.params.y-(this.dropImg.pageY-t.pageY),this.$set(this,"drawImg",o),this.printImg(),t.stopPropagation()}},scaleReset:function(){this.drawImg.width=this.drawImg.swidth,this.drawImg.height=this.drawImg.sheight,this.printImg()},scaleImgWheel:function(t){var o=this;if(this.drawImg.img&&!0===this.scaleAble){var e=void 0,i=t||window.event;i.wheelDelta?e=-i.wheelDelta/40:i.detail&&(e=i.detail);this.drawImg.x=this.drawImg.width-9*e>50?this.drawImg.x+3*e:this.drawImg.x,this.drawImg.y=this.drawImg.width-9*e>50?this.drawImg.y+3*e:this.drawImg.y,this.drawImg.width=this.drawImg.width-9*e>50?this.drawImg.width-9*e:50,this.drawImg.height=this.drawImg.width/this.scaleImg.rate,this.printImg(),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout(function(){o.cropPicture(!0)},100)}return t.preventDefault(),t.returnValue=!1,!1},flipHorizontal:function(){this.drawImg.img&&(0==this.isFlipHorizontal?this.isFlipHorizontal=!0:this.isFlipHorizontal=!1,this.printImg())},flipVertically:function(){this.drawImg.img&&(0==this.isFlipVertically?this.isFlipVertically=!0:this.isFlipVertically=!1,this.printImg())},turnImg:function(t){var o=this.rotateImg.angle+t;o>=-180&&o<=180&&(this.rotateImg.angle=o,this.rotateControl.position=o/180*100+100,this.printImg("rotate"))},turnReset:function(){this.rotateImg.angle=0,this.rotateControl.position=100,this.printImg("rotate")},controlBtnMouseDown:function(t,o){this.controlBox.disable=!1,this.controlBox.btnName=o,this.controlBox.start.x=t.clientX,this.controlBox.start.y=t.clientY,this.controlBox.start.width=this.toolBox.width,this.controlBox.start.height=this.toolBox.height,t.stopPropagation()},controlBtnMouseUp:function(t){this.controlBox.disable=!0,this.dropImgOff(),this.resetToolBox(),this.toolBoxMouseUp(),t.stopPropagation()},controlBtnMouseMove:function(t){if(!1===this.controlBox.disable){var o=t.clientX-this.controlBox.start.x,e=t.clientY-this.controlBox.start.y,i=void 0,s=void 0;"leftUp"==this.controlBox.btnName&&(i=this.toolBox.x+o,s=this.toolBox.y+e,this.toolBox.width=this.controlBox.start.width-o,this.toolBox.height=this.controlBox.start.height-e),"rightUp"==this.controlBox.btnName&&(i=this.toolBox.x,s=this.toolBox.y+e,this.toolBox.width=this.controlBox.start.width+o,this.toolBox.height=this.controlBox.start.height-e),"rightDown"==this.controlBox.btnName&&(i=this.toolBox.x,s=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+o,this.toolBox.height=this.controlBox.start.height+e),"leftDown"==this.controlBox.btnName&&(i=this.toolBox.x+o,s=this.toolBox.y,this.toolBox.width=this.controlBox.start.width-o,this.toolBox.height=this.controlBox.start.height+e),"topCenter"==this.controlBox.btnName&&(i=this.toolBox.x,s=this.toolBox.y+e,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height-e),"downCenter"==this.controlBox.btnName&&(i=this.toolBox.x,s=this.toolBox.y,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height+e),"leftCenter"==this.controlBox.btnName&&(i=this.toolBox.x+o,s=this.toolBox.y,this.toolBox.width=this.controlBox.start.width-o,this.toolBox.height=this.controlBox.start.height),"rightCenter"==this.controlBox.btnName&&(i=this.toolBox.x,s=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+o,this.toolBox.height=this.controlBox.start.height),this.drawControlBox(this.toolBox.width,this.toolBox.height,i,s)}t.stopPropagation()},cropPicture:function(t){var o=this;if(this.drawImg.img){var e=this.$refs.canvas;if(this.WatermarkText&&!t){var i=e.getContext("2d");i.font=this.WatermarkTextFont,i.fillStyle=this.WatermarkTextColor,i.textAlign="right",i.textBaseline="bottom",i.fillText(this.WatermarkText,this.toolBox.x+this.toolBox.width*this.WatermarkTextX,this.toolBox.y+this.toolBox.height*this.WatermarkTextY)}var s=new Image;!0===this.crossOrigin&&(s.crossOrigin=this.crossOriginHeader),s.src=e.toDataURL(),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,o,i){window.atob?setTimeout(function(){for(var s=atob(e.toDataURL(o,i).split(",")[1]),a=s.length,r=new Uint8Array(a),n=0;n<a;n++)r[n]=s.charCodeAt(n);t(new Blob([r],{type:o||"image/png"}))},200):t(!1,{type:"image/png"})}}),e.toBlob(function(e){if(e){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){var e=setInterval(function(){if(2==i.readyState){clearInterval(e);var a=document.createElement("canvas"),r=a.getContext("2d");if(1==o.originalGraph){var n=o.drawImg.width/o.drawImg.swidth,l=o.toolBox.width/n,h=o.toolBox.height/n;a.width=l,a.height=h;var d=(o.toolBox.x-o.drawImg.x)/n,c=(o.toolBox.y-o.drawImg.y)/n,g=o.drawImg.swidth,m=o.drawImg.sheight;r.translate(-d,-c),r.drawImage(o.drawImg.img,0,0,g,m)}else{a.width=o.toolBox.width,a.height=o.toolBox.height;var u=o.toolBox;if(o.rate){var x=o.rate.split(":")[0]/o.rate.split(":")[1];o.rate.split(":")[0]>=o.rate.split(":")[1]?r.drawImage(s,u.x,u.y,u.width,u.width*x,0,0,u.width,u.width*x):r.drawImage(s,u.x,u.y,u.width,u.width/x,0,0,u.width,u.width/x)}else r.drawImage(s,u.x,u.y,u.width,u.height,0,0,u.width,u.height)}a.toBlob(function(e){t?o.$emit("onPrintImg",{fileName:o.fileName,blob:e,file:o.dataURLtoFile(a.toDataURL(),o.fileName),dataURL:a.toDataURL()}):(o.handleClose(),o.$emit("cutDown",{fileName:o.fileName,blob:e,file:o.dataURLtoFile(a.toDataURL(),o.fileName),dataURL:a.toDataURL()}))},"image/jpeg",.95)}},200)}}else{var a=document.createElement("canvas");a.width=o.toolBox.width,a.height=o.toolBox.height;var r=a.getContext("2d"),n=o.toolBox;if(o.rate){var l=o.rate.split(":")[0]/o.rate.split(":")[1];r.drawImage(s,n.x,n.y,n.width,n.width*l,0,0,n.width,n.width*l)}else r.drawImage(s,n.x,n.y,n.width,n.height,0,0,n.width,n.height);t?o.$emit("onPrintImg",{fileName:o.fileName,dataURL:a.toDataURL()}):(o.handleClose(),o.$emit("cutDown",{fileName:o.fileName,dataURL:a.toDataURL()}))}})}else t||(console.warn("No picture selected"),o.$emit("error",{err:1,msg:"No picture selected"}))},scrollBarControlMove:function(t){if(this.rotateControl.active){var o=t.pageX-this.rotateControl.start.x,e=this.rotateControl.start.position+o;e<=0&&(e=0),e>=200&&(e=200),this.rotateControl.position=e,this.rotateImg.angle=(e-100)/100*180,this.printImg()}},scrollBarControlOn:function(t){this.rotateControl.active=!0,this.rotateControl.start.x=t.pageX,this.rotateControl.start.y=t.pageY,this.rotateControl.start.position=this.rotateControl.position},scrollBarControlOff:function(){this.rotateControl.active=!1}}},d={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[!0===t.showChooseBtn&&!0===t.isModal?e("div",{on:{click:t.handleOpen}},[t._t("openImgCutter"),t._v(" "),t._t("open")],2):t._e(),t._v(" "),t.$slots.openImgCutter||t.$slots.open||!0!==t.isModal?t._e():e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.handleOpen}},[t._v(t._s(t.label))]),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.visible?e("div",{ref:"mask",class:!0===t.isModal?"mask vue-img-cutter":""},[t.visible?e("div",{class:!0===t.isModal?"dialogBoxModal":"dialogBox"},[e("transition",{attrs:{name:"fade","enter-class":"fade-in-enter","enter-active-class":"fade-in-active","leave-class":"fade-out-enter","leave-active-class":"fade-out-active"}},[e("div",{ref:"dialogMainModalRef",class:!0===t.isModal?"dialogMainModal":"dialogMain",style:"width:"+(!0===t.isModal?t.boxWidth+32:t.boxWidth)+"px"},[e("div",{staticClass:"toolMain"},[!0===t.isModal?e("div",{staticClass:"tool-title"},[t._v("\n                图片裁剪\n                "),e("span",{staticClass:"closeIcon",on:{click:t.handleClose}},[t._v("×")])]):t._e(),t._v(" "),e("div",{ref:"toolBox",staticClass:"toolBox",style:"height:"+t.boxHeight+"px;width:"+t.boxWidth+"px",on:{mousemove:t.controlBtnMouseMove,mouseup:t.controlBtnMouseUp,mouseleave:t.controlBtnMouseUp}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.drawImg.img&&!0===t.showChooseBtn,expression:"!drawImg.img && showChooseBtn===true"}],staticClass:"tips"},[e("div",{staticClass:"btn btn-warning btn-xs",on:{click:t.chooseImg}},[t._v(t._s(t.label))])]),t._v(" "),1==t.tool?e("div",{directives:[{name:"show",rawName:"v-show",value:this.drawImg.img&&!0!==t.dropImg.active&&1==t.controlBox.disable&&1==t.toolBox.disable,expression:"this.drawImg.img && dropImg.active!==true && controlBox.disable==true && toolBox.disable==true"}],staticClass:"dockMain",style:"background:"+this.toolBgc,on:{mouseenter:t.dropImgOff}},[t.rate?e("div",{staticClass:"dockBtn"},[t._t("ratio",[t._v("\n                      Ratio:\n                    ")]),t._v("\n                    "+t._s(t.rate)+"\n                  ")],2):t._e(),t._v(" "),e("div",{staticClass:"dockBtn",on:{click:t.scaleReset}},[t._t("scaleReset",[t._v("\n                      Scale:\n                    ")]),t._v("\n                    "+t._s(t.drawImg.swidth>0?(t.drawImg.width/t.drawImg.swidth).toFixed(2):"-")+"\n                  ")],2),t._v(" "),!1===t.originalGraph?e("div",{staticClass:"dockBtn",on:{click:function(o){return t.turnImg(-90)}}},[t._t("turnLeft",[t._v("\n                      ↳\n                    ")])],2):t._e(),t._v(" "),!1===t.originalGraph?e("div",{staticClass:"dockBtn",on:{click:function(o){return t.turnImg(90)}}},[t._t("turnRight",[t._v("\n                      ↲\n                    ")])],2):t._e(),t._v(" "),!1===t.originalGraph?e("div",{staticClass:"dockBtn",on:{click:function(o){return t.turnReset()}}},[t._t("reset",[t._v("\n                      ↻\n                    ")])],2):t._e(),t._v(" "),!1===t.originalGraph?e("div",{staticClass:"dockBtnScrollBar"},[e("div",{ref:"dockBtnScrollControl",staticClass:"scrollBarControl",style:"left:"+t.rotateControl.position+"px",on:{mousemove:t.scrollBarControlMove,mousedown:t.scrollBarControlOn,mouseleave:t.scrollBarControlOff,mouseup:t.scrollBarControlOff}}),t._v(" "),1==t.rotateControl.active?e("div",{staticClass:"scrollBarText",style:"left:"+t.rotateControl.position+"px"},[t._v("\n                      "+t._s(t.rotateImg.angle.toFixed(0)+"°")+"\n                    ")]):t._e()]):t._e(),t._v(" "),!1===t.originalGraph?e("div",{staticClass:"dockBtn",on:{click:t.flipHorizontal}},[t._t("flipHorizontal",[t._v("\n                      ⇆\n                    ")])],2):t._e(),t._v(" "),!1===t.originalGraph?e("div",{staticClass:"dockBtn",on:{click:t.flipVertically}},[t._t("turnRight",[t._v("\n                      ⇅\n                    ")])],2):t._e()]):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.drawImg.img,expression:"drawImg.img!=null"}],ref:"toolBoxControl",staticClass:"toolBoxControl",on:{mousedown:t.toolBoxMouseDown,mouseup:t.toolBoxMouseUp,mousemove:t.toolBoxMouseMove,mouseleave:t.toolBoxMouseLeave}},[e("div",{staticClass:"toolBoxControlBox"},[e("div",{staticClass:"controlBox"},[e("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineTop"}),t._v(" "),e("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineBottom"}),t._v(" "),e("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineLeft"}),t._v(" "),e("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineRight"}),t._v(" "),!1===t.originalGraph?e("div",{staticClass:"selectArea"},[t._v("\n                        宽:"+t._s(t.toolBox.width)+" 高:"+t._s(t.toolBox.height)+"\n                        (x:"+t._s(t.toolBoxPosition.x)+",y:"+t._s(t.toolBoxPosition.y)+")\n                      ")]):t._e(),t._v(" "),!0===t.originalGraph?e("div",{staticClass:"selectArea"},[t._v("\n                        宽:"+t._s((t.toolBox.width/(t.drawImg.width/t.drawImg.swidth)).toFixed(0))+" 高:"+t._s((t.toolBox.height/(t.drawImg.width/t.drawImg.swidth)).toFixed(0))+"\n                        (x:"+t._s(t.toolBoxPosition.x)+",y:"+t._s(t.toolBoxPosition.y)+")\n                      ")]):t._e(),t._v(" "),!0===t.sizeChange?e("div",{staticClass:"leftUp controlBtn",attrs:{"data-name":"leftUp"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"leftUp")}}}):t._e(),t._v(" "),!0===t.sizeChange?e("div",{staticClass:"leftDown controlBtn",attrs:{"data-name":"leftDown"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"leftDown")}}}):t._e(),t._v(" "),!0===t.sizeChange?e("div",{staticClass:"rightUp controlBtn",attrs:{"data-name":"rightUp"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"rightUp")}}}):t._e(),t._v(" "),!0===t.sizeChange?e("div",{staticClass:"rightDown controlBtn",attrs:{"data-name":"rightDown"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"rightDown")}}}):t._e(),t._v(" "),!0===t.sizeChange&&!t.rate&&this.toolBox.width>20?e("div",{staticClass:"topCenter controlBtn",attrs:{"data-name":"topCenter"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"topCenter")}}}):t._e(),t._v(" "),!0===t.sizeChange&&!t.rate&&this.toolBox.width>20?e("div",{staticClass:"downCenter controlBtn",attrs:{"data-name":"downCenter"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"downCenter")}}}):t._e(),t._v(" "),!0===t.sizeChange&&!t.rate&&this.toolBox.height>20?e("div",{staticClass:"leftCenter controlBtn",attrs:{"data-name":"leftCenter"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"leftCenter")}}}):t._e(),t._v(" "),!0===t.sizeChange&&!t.rate&&this.toolBox.height>20?e("div",{staticClass:"rightCenter controlBtn",attrs:{"data-name":"rightCenter"},on:{mousedown:function(o){return t.controlBtnMouseDown(o,"rightCenter")}}}):t._e()]),t._v(" "),e("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-1"}),t._v(" "),e("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-2"}),t._v(" "),e("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-3"}),t._v(" "),e("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-4"})])]),t._v(" "),e("div",{staticClass:"copyright"},[t.DoNotDisplayCopyright?t._e():e("a",{attrs:{target:"_blank",href:"https://github.com/acccccccb/vue-img-cutter",rel:"nofollow"}},[t._v("vue-img-cutter "+t._s(t.version))])]),t._v(" "),e("canvas",{ref:"canvasSelectBox",staticClass:"canvasSelectBox",attrs:{width:t.boxWidth,height:t.boxHeight},on:{mousedown:t.dropImgOn,mouseup:t.dropImgOff,mousemove:t.dropImgMove}}),t._v(" "),e("canvas",{ref:"canvas",staticClass:"canvas",attrs:{width:t.boxWidth,height:t.boxHeight}})])]),t._v(" "),e("div",{staticClass:"i-dialog-footer"},[e("input",{ref:"inputFile",staticStyle:{width:"1px",height:"1px",border:"none",opacity:"0"},attrs:{type:"file",accept:"image/gif, image/jpeg ,image/png"},on:{change:t.putImgToCanv}}),t._v(" "),e("span",{on:{click:t.chooseImg}},[t._t("choose",[!0===t.showChooseBtn?e("div",{staticClass:"btn btn-primary btn-primary-plain"},[t._v(t._s(t.label))]):t._e()])],2),t._v(" "),e("div",{staticClass:"btn-group fr"},[e("span",{on:{click:t.handleClose}},[t._t("cancel",[e("button",{staticClass:"btn btn-default",attrs:{type:"button"}},[t._v("取消")])])],2),t._v(" "),e("span",{on:{click:function(o){return t.cropPicture(!1)}}},[t._t("confirm",[e("button",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"15px"},attrs:{type:"button",disabled:!t.drawImg.img}},[t._v("确定")])])],2)])])])]),t._v(" "),e("div",{staticStyle:{clear:"both"}})],1):t._e()]):t._e()])],1)},staticRenderFns:[]};var c=e("VU/8")(h,d,!1,function(t){e("lfJ+")},"data-v-83221ac8",null).exports;o.a=c},"lfJ+":function(t,o){},xT6B:function(t,o,e){"use strict";o.a=function(t){var o=t.indexOf("T"),e=t.indexOf("Z"),i=t.substr(0,o),s=t.substr(o+1,e-o-1),a=i+" "+s,r=28800+(r=(r=(r=new Date(Date.parse(a))).getTime())/1e3);return new Date(1e3*parseInt(r)).toLocaleString().replace(/年|月/g,"-").replace(/日/g," ")}}});
//# sourceMappingURL=0.bd1ca08d798ae18db51e.js.map