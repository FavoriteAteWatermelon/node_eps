webpackJsonp([2],{"3cXf":function(e,t,a){e.exports={default:a("L+o2"),__esModule:!0}},"L+o2":function(e,t,a){var i=a("ZuHZ"),n=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},"b9Z+":function(e,t,a){"use strict";t.a=function(e){return new n.a(function(t,a){s.a.post(l.a+r.g,e).then(function(e){console.log(e),t(e)}).catch(function(e){a(e),console.log(e)})})},t.b=function(e){return new n.a(function(t,a){s.a.post(l.a+r.h,e).then(function(e){console.log(e),t(e)}).catch(function(e){a(e),console.log(e)})})},t.c=function(e,t,a){return new n.a(function(i,n){s.a.get(l.a+r.i+"?limit="+e+"&skip="+(t-1)*e+"&dateArray="+a).then(function(e){i(e)}).catch(function(e){n(e),console.log(e)})})};var i=a("rVsN"),n=a.n(i),r=a("T452"),l=a("xjP8"),s=a("vLgD")},dq6d:function(e,t){},mwJ7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("3cXf"),n=a.n(i),r=a("aA9S"),l=a.n(r),s=a("4YfN"),o=a.n(s),c=a("a3Yh"),u=a.n(c),d=a("PSPz"),p=a("HjG9"),g=a("9Vkk"),h=a("b9Z+"),m=a("xT6B"),f=a("fUgm"),b={data:function(){var e;return e={imgUrl:"",dialogVisible:!1,trainList:{title:"",requiro:"",guider:"",trainOwner:""},valueDate:"",valueDay:""},u()(e,"dialogVisible",!1),u()(e,"pictLoading",!1),u()(e,"tableData",[]),u()(e,"currentPage",1),u()(e,"pageSize",10),u()(e,"userNum",""),u()(e,"startDate",""),u()(e,"total",0),u()(e,"endDate",""),u()(e,"tableBarList",[{label:"序號",width:"200px",type:"index"},{property:"username",label:"姓名"},{property:"depart",label:"部門"},{property:"createTime",label:"創建時間"},{property:"auth",label:"權限"}]),e},computed:o()({},Object(f.b)(["isLogin","userInfo"])),methods:{deleteItem:function(e){var t=this,a=e._id;Object(h.b)({_id:a,username:this.userInfo.username}).then(function(e){"error"===e.data?t.$message({message:"删除失败!",type:"warning"}):"ok"===e.data?(t.$message({message:"删除成功!",type:"success"}),t._search()):t.$message({message:"未知错误请联系管理员!",type:"error"})})},addUser:function(){var e=this;if(this.loading=!0,!this.isLogin)return this.$message({message:"請登錄!",type:"warning"}),void(this.dialogVisible=!1);this.userInfo.username?Object(h.a)(l()({},this.trainList,{creater:this.userInfo.username,trainDuring:this.valueDate[0]+" ~ "+this.valueDate[1]})).then(function(t){e.loading=!1,t.data?"exist"===t.data?e.$message({message:"此用戶名已存在!",type:"warning"}):(e.$message({message:"新增成功!",type:"success"}),e.dialogVisible=!1,e._search()):(e.$message({message:"token过期请退出重新登录!",type:"error"}),e.dialogVisible=!1)}):(this.loading=!1,this.$message({message:"請輸入新增用戶名!",type:"warning"}))},_addItem:function(){this.dialogVisible=!0},_search:function(){var e=this;this.pictLoading=!0,Object(h.c)(this.pageSize,this.currentPage,n()(this.valueDay)).then(function(t){t.data.data.forEach(function(e){e.createDate=Object(m.a)(e.createDate)}),e.tableData=t.data.data,e.total=t.data.total,e.pictLoading=!1})},_exportExcel:function(){this.$refs.doorTable.exportExcel(["工號","姓名","部門代碼","部門名稱","申請時間","休假時數","休假開始時間","休假結束時間","休假類別","請假原因"],["userNo","userName","deptNo","deptName","applyDate","absenceHours","startTime","endTime","absenceName","reason"],"休假記錄表")},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this._search()},handleCurrentChange:function(e){this.currentPage=e,this._search()}},mounted:function(){this._search(),console.log(this.isLogin)},components:{BasePagination:d.a,DataTable:p.a,ImgCutter:g.a}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"10px"}},[a("div"),e._v(" "),a("div",[a("el-button",{staticClass:"exportExcel",staticStyle:{"margin-right":"20px","text-align":"right",background:"#77A1D3"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:e._exportExcel}},[e._v("導出Excel")]),e._v(" "),a("el-button",{staticClass:"exportExcel",staticStyle:{"margin-right":"20px","text-align":"right",background:"#20BDFF"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e._addItem}},[e._v("新增Training")]),e._v(" "),a("el-button",{staticStyle:{background:"#3CA55C"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e._search}},[e._v("搜索")])],1)]),e._v(" "),e.tableData.length?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.pictLoading,expression:"pictLoading"}],staticStyle:{width:"100%"},attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中","element-loading-spinner":"el-icon-loading",stripe:!0,border:!0,data:e.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序號",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{property:"title",label:"主題"}}),e._v(" "),a("el-table-column",{attrs:{property:"trainOwner",label:"受訓人"}}),e._v(" "),a("el-table-column",{attrs:{width:"200px",property:"trainDuring",label:"要求完成時間段"}}),e._v(" "),a("el-table-column",{attrs:{property:"requiro",width:"200px",label:"详情"}}),e._v(" "),a("el-table-column",{attrs:{property:"guider",label:"導師"}}),e._v(" "),a("el-table-column",{attrs:{property:"depart",label:"部門"}}),e._v(" "),a("el-table-column",{attrs:{property:"createDate",width:"200px",label:"創建時間"}}),e._v(" "),a("el-table-column",{attrs:{property:"creater",label:"創建人"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popconfirm",{directives:[{name:"show",rawName:"v-show",value:e.userInfo.username===t.row.creater,expression:" userInfo.username === scope.row.creater "}],attrs:{title:"这是一段内容确定删除吗？"},on:{confirm:function(a){return e.deleteItem(t.row)}}},[a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("删除")])],1)]}}],null,!1,919586632)})],1):e._e(),e._v(" "),e.tableData.length?a("BasePagination",{attrs:{total:e.total},on:{handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}}):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"新增Training項目","close-on-click-modal":!1,visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticStyle:{display:"flex","margin-top":"20px"}},[a("span",{staticClass:"title"},[e._v("標題:")]),a("el-input",{attrs:{placeholder:"請輸入標題"},model:{value:e.trainList.title,callback:function(t){e.$set(e.trainList,"title",t)},expression:"trainList.title"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","margin-top":"20px"}},[a("span",{staticClass:"title"},[e._v("指導人:")]),a("el-input",{attrs:{placeholder:"請輸入指導人"},model:{value:e.trainList.guider,callback:function(t){e.$set(e.trainList,"guider",t)},expression:"trainList.guider"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","margin-top":"20px"}},[a("span",{staticClass:"title"},[e._v("受訓人:")]),a("el-input",{attrs:{placeholder:"請輸入Training對象"},model:{value:e.trainList.trainOwner,callback:function(t){e.$set(e.trainList,"trainOwner",t)},expression:"trainList.trainOwner"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","margin-top":"20px"}},[a("span",{staticClass:"title"},[e._v("要求段選擇:")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.valueDate,callback:function(t){e.valueDate=t},expression:"valueDate"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","margin-top":"20px"}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"請輸入要求明細"},model:{value:e.trainList.requiro,callback:function(t){e.$set(e.trainList,"requiro",t)},expression:"trainList.requiro"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.addUser}},[e._v("新增")])],1)],1)},staticRenderFns:[]};var y=a("C7Lr")(b,v,!1,function(e){a("dq6d")},"data-v-002d0423",null);t.default=y.exports}});
//# sourceMappingURL=2.86f3e360885a6bcb70da.js.map